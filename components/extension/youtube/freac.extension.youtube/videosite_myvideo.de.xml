<VideoSite>
  <name>MyVideo.de</name>
  <version>1.0</version>
  <decoders>
    <decoder>avconv-flv_audio-dec</decoder>
  </decoders>

  <script type="text/javascript">
    <![CDATA[
      function canHandleURL(URL) {
	if (URL.toLowerCase().match(/http:\/\/www.myvideo.de\/watch\/.*/) ||
	    URL.toLowerCase().match(/http:\/\/www.myvideo.de\/themen\/.*m_id=.*/)) return true;
	else									   return false;
      }

      function getVideoURL(html) {
	var id	    = (html.match(/var flashvars={.*?ID:'(.*?)'.*?};/), RegExp.$1);

	var regExp  = new RegExp("'(http:\/\/[^']*?\/thumbs\/" + id + "_[0-9]+.jpg)'");
	var results = null;

	return (results = regExp.exec(html)), results != null ? results[1].replace(/thumbs\//, "").replace(/_[0-9]+.jpg/, ".flv") : null;
      }

      function queryMetadata(html) {
	var id	    = (html.match(/var flashvars={.*?ID:'(.*?)'.*?};/), RegExp.$1);

	var regExp   = new RegExp("'(http:\/\/[^']*?\/thumbs\/" + id + "_[0-9]+.jpg)'");
	var results  = null;

	var metadata = new Metadata();

	metadata.title	     = (html.match(/<h1 class='globalHd'>(.*?)<\/h1>/) ? RegExp.$1 : null);
	metadata.description = (html.match(/<span itemprop="description">((?:.|\n|\r)*?)<\/span>/) ? RegExp.$1 : null);

	metadata.date	     = (html.match(/Eingestellt am:\s*<script type="text\/javascript">\/\* <!\[CDATA\[ \*\/ CDR\("(.*?)"\); \/\* \]\]> \*\/<\/script><\/div>/) ? RegExp.$1 : null);
	metadata.thumbnail   = ((results = regExp.exec(html)), results != null ? results[1] : null);

	metadata.uploader    = (html.match(/Von: <a .*?>(.*?)<\/a>/) ? RegExp.$1 : null);

	return metadata;
      }
    ]]>
  </script>
</VideoSite>